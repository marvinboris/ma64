var D=Object.defineProperty;var H=(r,c,s)=>c in r?D(r,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[c]=s;var d=(r,c,s)=>H(r,typeof c!="symbol"?c+"":c,s);import{c as I,r as M,u as J,j as e,N as L,C as p,R as C,I as O,a as B}from"./index-BncDn27B.js";import{F as W}from"./FormGroup-CjRq5iBt.js";import{B as A,S as E,a as G}from"./Subtitle-EIBA-Hk5.js";import{e as P}from"./Error-CC8F97pB.js";import{a as R,F as f}from"./Input-BldVOD2V.js";import{b as _}from"./BetweenButton-CNQ28UJ2.js";import{T as U}from"./index-C0jNRMwo.js";import{F as V}from"./Feedback-C0SvNv4r.js";import{g as q,p as z,r as K}from"./cms-Dgxu_C9N.js";import{o as y}from"./types-DL2rpS-Q.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./WithTooltip-yJJWpatI.js";const w="wrench",u=({sm:r=!1})=>e.jsx(p,{xs:12,className:`mb-${r?2:3}`}),Q=({general:r,language:c})=>{const[s,t]=M.useState(r),a=`${c.abbr}[general]`,n=`${c.abbr}-general`,h=["Date","Time","Home"].map(o=>e.jsx(f,{type:"text",placeholder:o,className:"col-md-6 col-lg-4",id:`${n}-${o.toLowerCase()}`,name:`${a}[${o.toLowerCase()}]`,value:s==null?void 0:s[o.toLowerCase()],onChange:l=>y(s,t)(l,o.toLowerCase())},Math.random())),j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((o,l)=>e.jsx(f,{type:"text",placeholder:o,name:`${a}[days][]`,value:s==null?void 0:s.days[l],className:"col-md-6 col-lg-4",id:`${n}-date-${l}`,onChange:m=>y(s,t)(m,"days",l)},Math.random())),x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((o,l)=>e.jsx(f,{type:"text",className:"col-md-6 col-lg-4",id:`${n}-months-${l}`,name:`${a}[months][]`,placeholder:o,onChange:m=>y(s,t)(m,"months",l),value:s==null?void 0:s.months[l]},Math.random()));return e.jsx(e.Fragment,{children:e.jsxs(C,{children:[h,e.jsx(u,{}),e.jsx(p,{xs:12,children:e.jsx("h4",{children:"Week days"})}),e.jsx(u,{sm:!0}),j,e.jsx(u,{}),e.jsx(p,{xs:12,children:e.jsx("h4",{children:"Months"})}),e.jsx(u,{sm:!0}),x]})})};class X extends M.Component{constructor(){super(...arguments);d(this,"state",{abbr:"fr"});d(this,"submitHandler",async s=>{var t,a;s.preventDefault(),await((a=(t=this.props).patch)==null?void 0:a.call(t,s.target))});d(this,"inputChangeHandler",s=>{const{name:t,value:a,files:n}=s.target;this.setState({[t]:n?n[0]:a})});d(this,"fileUpload",()=>{var s;return(s=document.getElementById("logo"))==null?void 0:s.click()});d(this,"toggle",s=>{this.state.abbr!==s&&this.setState({abbr:s})})}static getDerivedStateFromProps(s,t){var a,n;if((n=(a=s.backend)==null?void 0:a.cms)!=null&&n.cms&&t.app_name===""){const{backend:{cms:{cms:{general:h}}}}=s;return J(t,{...h})}return t}async componentDidMount(){var s,t,a,n;(t=(s=this.props).reset)==null||t.call(s),(n=(a=this.props).get)==null||n.call(a)}componentWillUnmount(){var s,t;(t=(s=this.props).reset)==null||t.call(s)}render(){var S,N,k;if(!((S=this.props.content)!=null&&S.cms)||!((N=this.props.backend)!=null&&N.cms)||!((k=this.props.auth)!=null&&k.data))return null;let{content:{cms:{pages:{components:{form:{save:s}},backend:{pages:{cms:{title:t,general:a}}}}}},backend:{cms:{loading:n,error:h,message:j,cms:x,languages:o}},auth:{data:{role:{features:l}}}}=this.props;const{abbr:m}=this.state;let g=null,$=null;const F=l.find(b=>b.prefix==="cms"),v=!(F&&JSON.parse(F.permissions).includes("u"))&&e.jsx(L,{to:"/user/dashboard"});if(n)g=e.jsx(p,{xs:12,children:e.jsx(B,{})});else{$=e.jsx(e.Fragment,{children:e.jsx(P,{err:h})}),o||(o=[]);const b=o.map(i=>e.jsx("option",{value:i.abbr,children:i.name},Math.random()+JSON.stringify(i))),T=o.map(i=>e.jsx("div",{className:i.abbr===m?"":"d-none",children:e.jsx(Q,{language:i,general:x==null?void 0:x.pages[i.abbr].general})},Math.random()));g=e.jsx(e.Fragment,{children:e.jsxs(p,{xl:9,children:[e.jsx(V,{message:j}),e.jsxs(C,{children:[e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx("div",{className:"col-12 d-flex",children:e.jsx(W,{children:e.jsx(O,{type:"select",name:"abbr",onChange:this.inputChangeHandler,value:m,children:b})})}),e.jsx(p,{lg:12,children:T}),e.jsx("div",{className:"col-12",children:e.jsx(_,{color:"green",icon:"save",children:s})})]})]})})}return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(A,{main:a,icon:w}),e.jsx(E,{children:t}),e.jsx(G,{children:a})]}),e.jsxs("div",{children:[v,$,e.jsx(C,{children:e.jsx(R,{link:"/",onSubmit:this.submitHandler,icon:w,title:a,innerClassName:"row justify-content-center",children:g})})]})]})}}const Y=r=>({...r}),Z=r=>({get:()=>r(q()),patch:c=>r(z("general",c)),reset:()=>r(K())}),xe=I(Y,Z)(X);export{xe as default};
