var y=Object.defineProperty;var N=(t,a,s)=>a in t?y(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var d=(t,a,s)=>N(t,typeof a!="symbol"?a+"":a,s);import{c as k,r as w,j as e,R as f,ba as h,C as v,o as H,p as L,a as _,s as B}from"./index-BncDn27B.js";import{B as D,S as E,a as R}from"./Subtitle-EIBA-Hk5.js";import{e as T}from"./Error-CC8F97pB.js";import{a as I,F as P}from"./Input-BldVOD2V.js";import{b as q}from"./BetweenButton-CNQ28UJ2.js";import{F as M}from"./Feedback-C0SvNv4r.js";import{g as O}from"./languages-CMnUc65G.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";class $ extends w.Component{constructor(){super(...arguments);d(this,"state",{id:"",abbr:""});d(this,"submitHandler",async s=>{var n,r;s.preventDefault(),await((r=(n=this.props).post)==null?void 0:r.call(n,this.state.id))});d(this,"inputChangeHandler",s=>{var c,p,m;const{name:n,value:r,files:i}=s.target;if(n==="abbr"){const o=(m=(p=(c=this.props.backend)==null?void 0:c.languages)==null?void 0:p.languages)==null?void 0:m.find(g=>g.abbr===r);return this.setState({id:o==null?void 0:o.id,abbr:r})}this.setState({[n]:i?i[0]:r})})}async componentDidMount(){var s,n;(n=(s=this.props).get)==null||n.call(s),this.setState({abbr:localStorage.getItem("lang")})}render(){var x,j;if(!((x=this.props.content)!=null&&x.cms)||!((j=this.props.backend)!=null&&j.languages))return null;let{content:{cms:{pages:{components:{form:{save:s}},backend:{pages:{settings:{title:n,language:{title:r,form:i}}}}}}},backend:{languages:{loading:c,error:p,message:m,languages:o}}}=this.props,{id:g,abbr:S}=this.state,u=null,b=null;o||(o=[]);const C=o.sort((l,F)=>l.name.localeCompare(F.name)).map(l=>e.jsx("option",{value:l.abbr,children:l.name},l.name));return c?u=e.jsx(v,{xs:12,children:e.jsx(_,{})}):(b=e.jsx(e.Fragment,{children:e.jsx(T,{err:p})}),u=e.jsx(e.Fragment,{children:e.jsx(f,{children:e.jsx(I,{link:"",onSubmit:this.submitHandler,icon:h,title:r,innerClassName:"row justify-content-center",className:"shadow-sm",children:e.jsxs(v,{lg:8,children:[e.jsx(M,{message:m}),e.jsxs(f,{className:"justify-content-center",children:[e.jsx("input",{type:"hidden",name:"id",value:g}),e.jsxs(P,{type:"select",className:"col-md-6",icon:H,onChange:this.inputChangeHandler,value:S,name:"abbr",required:!0,placeholder:i.select_language,children:[e.jsx("option",{value:"",children:i.select_language}),C]}),e.jsx("div",{className:"col-12 text-center",children:e.jsx(q,{color:"green",icon:L,children:s})})]})]})})})})),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[e.jsx(D,{main:r,icon:h}),e.jsx(E,{user:!0,icon:h,children:n}),e.jsx(R,{user:!0,children:r})]}),e.jsxs("div",{className:"p-4 pb-0",children:[b,u]})]})}}const z=t=>({...t}),A=t=>({get:()=>t(O()),post:a=>t(B(a))}),te=k(z,A)($);export{te as default};
