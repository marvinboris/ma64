import{c as E,r as P,j as e,u as $,m as L,z as O,F as c,i as u,L as j,k as I,n as J,R,N as A}from"./index-BncDn27B.js";import{B,S as V,a as z}from"./Subtitle-EIBA-Hk5.js";import{D as C,L as M}from"./Delete-DN_4O9m9.js";import{e as U}from"./Error-CC8F97pB.js";import{F as g}from"./Feedback-C0SvNv4r.js";import{T as q}from"./index-C0jNRMwo.js";import{V as G}from"./View-DYaRmNR8.js";import{g as H,d as K,r as Q}from"./products-PvmdFcpO.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const f="blog";class X extends P.Component{componentDidMount(){var t,o;(o=(t=this.props).get)==null||o.call(t)}componentWillUnmount(){this.props.reset()}render(){var p,x,h;if(!((p=this.props.content)!=null&&p.cms)||!((x=this.props.backend)!=null&&x.products)||!((h=this.props.auth)!=null&&h.data))return null;let{content:{cms:{pages:{components:{list:{action:t,see:o}},backend:{pages:{products:{title:d,add:k,index:m,form:a}}}}}},backend:{products:{loading:N,error:b,message:y,products:i,total:S}},auth:{data:{role:{features:v}}}}=this.props;const r=v.find(s=>s.prefix==="products"),F=!r&&e.jsx(A,{to:"/user/dashboard"}),l=localStorage.getItem("lang")||"",T=e.jsx(e.Fragment,{children:e.jsx(U,{err:b})}),W=this.props.location.state?e.jsx(g,{time:5e3,message:this.props.location.state.message}):null,_=e.jsx(g,{message:y});i||(i=[]);const w=i.map(s=>$(s,{created_at:L(s.created_at),name:s.name[l],description:O(s.description[l]),photo:s.photo&&e.jsxs("div",{className:"d-flex",children:[e.jsx("span",{children:o}),e.jsx("span",{className:"ml-auto",children:e.jsx(G,{title:`${a.product_photo}: ${s.name[l]}`,content:e.jsx("img",{src:s.photo,className:"w-100"}),children:e.jsx(c,{icon:u,className:"text-green mr-2",fixedWidth:!0})})})]}),action:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{to:`/user/products/${s.id}`,className:"mx-1",children:e.jsx(c,{icon:u,className:"text-green",fixedWidth:!0})}),JSON.parse((r==null?void 0:r.permissions)||"[]").includes("u")&&e.jsx(j,{to:`/user/products/${s.id}/edit`,className:"mx-1",children:e.jsx(c,{icon:I,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((r==null?void 0:r.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(C,{deleteAction:()=>this.props.delete(s.id),children:e.jsx(c,{icon:J,className:"text-red",fixedWidth:!0})})})]})})),D=e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsx(M,{array:w,loading:N,data:JSON.stringify(i),get:this.props.get,total:S,bordered:!0,add:k,link:"/user/products/add",icon:f,title:m,className:"shadow-sm",fields:[{name:a.name,key:"name"},{name:a.brand,key:"brand"},{name:a.price,key:"price"},{name:a.description,key:"description"},{name:a.photo,key:"photo"},{name:a.slug,key:"slug"},{name:a.is_active,key:"is_active"},{name:t,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[e.jsx(B,{main:m,icon:f}),e.jsx(V,{children:d}),e.jsx(z,{children:m})]}),e.jsxs("div",{children:[F,T,W,_,D]})]})}}const Y=n=>({...n}),Z=n=>({get:(t,o,d)=>n(H(t,o,d)),delete:t=>n(K(t)),reset:()=>n(Q())}),le=E(Y,Z)(X);export{le as default};
