import{c as W,r as _,j as e,u as v,m as E,L as h,F as l,i as L,k as O,n as w,R as J,N as $}from"./index-BncDn27B.js";import{B as A,S as B,a as I}from"./Subtitle-EIBA-Hk5.js";import{D as P,L as C}from"./Delete-DN_4O9m9.js";import{e as M}from"./Error-CC8F97pB.js";import{F as u}from"./Feedback-C0SvNv4r.js";import{T as U}from"./index-C0jNRMwo.js";import{g as q,d as z,r as G}from"./roles-DVscBMdW.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const j="user-tag";class H extends _.Component{componentDidMount(){var s,o;(o=(s=this.props).get)==null||o.call(s)}componentWillUnmount(){this.props.reset()}render(){var m,p,x;if(!((m=this.props.content)!=null&&m.cms)||!((p=this.props.backend)!=null&&p.roles)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:s}},backend:{pages:{roles:{title:o,add:i,index:c,form:d}}}}}},backend:{roles:{loading:f,error:g,message:k,roles:n,total:N}},auth:{data:{role:{features:b}}}}=this.props;const t=b.find(r=>r.prefix==="roles"),y=!t&&e.jsx($,{to:"/user/dashboard"}),F=e.jsx(e.Fragment,{children:e.jsx(M,{err:g})}),S=this.props.location.state?e.jsx(u,{time:5e3,message:this.props.location.state.message}):null,R=e.jsx(u,{message:k});n||(n=[]);const T=n.map(r=>v(r,{created_at:E(r.created_at),action:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{to:`/user/roles/${r.id}`,className:"mr-2",children:e.jsx(l,{icon:L,className:"text-green",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("u")&&e.jsx(h,{to:`/user/roles/${r.id}/edit`,className:"mr-2",children:e.jsx(l,{icon:O,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(P,{deleteAction:()=>this.props.delete(r.id),children:e.jsx(l,{icon:w,className:"text-red",fixedWidth:!0})})})]})})),D=e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx(C,{array:T,loading:f,data:JSON.stringify(n),get:this.props.get,total:N,bordered:!0,add:i,link:"/user/roles/add",icon:j,title:c,className:"shadow-sm",fields:[{name:d.name,key:"name"},{name:d.description,key:"description"},{name:d.created_at,key:"created_at"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(A,{main:c,icon:j}),e.jsx(B,{children:o}),e.jsx(I,{children:c})]}),e.jsxs("div",{children:[y,F,S,R,D]})]})}}const K=a=>({...a}),Q=a=>({get:(s,o,i)=>a(q(s,o,i)),delete:s=>a(z(s)),reset:()=>a(G())}),ne=W(K,Q)(H);export{ne as default};
