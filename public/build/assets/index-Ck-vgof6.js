import{c as D,r as W,j as e,u as _,m as w,L as g,F as l,i as E,k as O,n as $,R as J,N as R}from"./index-BncDn27B.js";import{B as A,S as B,a as C}from"./Subtitle-EIBA-Hk5.js";import{D as I,L as P}from"./Delete-DN_4O9m9.js";import{e as M}from"./Error-CC8F97pB.js";import{F as h}from"./Feedback-C0SvNv4r.js";import{T as U}from"./index-C0jNRMwo.js";import{g as q,d as z,r as G}from"./languages-CMnUc65G.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const u="language";class H extends W.Component{componentDidMount(){var a,n;(n=(a=this.props).get)==null||n.call(a)}componentWillUnmount(){this.props.reset()}render(){var m,p,x;if(!((m=this.props.content)!=null&&m.cms)||!((p=this.props.backend)!=null&&p.languages)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:a}},backend:{pages:{languages:{title:n,add:c,index:d,form:o}}}}}},backend:{languages:{loading:f,error:j,message:b,languages:i,total:k}},auth:{data:{role:{features:N}}}}=this.props;const t=N.find(s=>s.prefix==="languages"),y=!t&&e.jsx(R,{to:"/user/dashboard"}),L=e.jsx(e.Fragment,{children:e.jsx(M,{err:j})}),F=this.props.location.state?e.jsx(h,{time:5e3,message:this.props.location.state.message}):null,S=e.jsx(h,{message:b});i||(i=[]);const T=i.map(s=>_(s,{created_at:w(s.created_at),flag:e.jsxs("div",{children:[e.jsx("span",{className:`flag-icon flag-icon-${s.flag.toLowerCase()} mr-1`}),s.flag]}),action:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{to:`/user/languages/${s.id}`,className:"mx-1",children:e.jsx(l,{icon:E,className:"text-green",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("u")&&e.jsx(g,{to:`/user/languages/${s.id}/edit`,className:"mx-1",children:e.jsx(l,{icon:O,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(I,{deleteAction:()=>this.props.delete(s.id),children:e.jsx(l,{icon:$,className:"text-red",fixedWidth:!0})})})]})})),v=e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx(P,{array:T,loading:f,data:JSON.stringify(i),get:this.props.get,total:k,bordered:!0,add:c,link:"/user/languages/add",icon:u,title:d,className:"shadow-sm",fields:[{name:o.name,key:"name"},{name:o.abbr,key:"abbr"},{name:o.flag,key:"flag"},{name:o.created_at,key:"created_at"},{name:a,key:"action"}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(A,{main:d,icon:u}),e.jsx(B,{children:n}),e.jsx(C,{children:d})]}),e.jsxs("div",{children:[y,L,F,S,v]})]})}}const K=r=>({...r}),Q=r=>({get:(a,n,c)=>r(q(a,n,c)),delete:a=>r(z(a)),reset:()=>r(G())}),oe=D(K,Q)(H);export{oe as default};
