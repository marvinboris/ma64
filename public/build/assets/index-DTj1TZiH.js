import{c as W,r as w,j as e,u as D,m as S,F as i,i as p,L as x,k as _,n as $,R as v,aU as h}from"./index-BncDn27B.js";import{B as E,S as L,a as R}from"./Subtitle-EIBA-Hk5.js";import{D as A,L as B}from"./Delete-DN_4O9m9.js";import{e as I}from"./Error-CC8F97pB.js";import{F as j}from"./Feedback-C0SvNv4r.js";import{T as O}from"./index-C0jNRMwo.js";import{V as P}from"./View-DYaRmNR8.js";import{g as V,d as C,r as J}from"./users-DD1ZIDYJ.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";class M extends w.Component{componentDidMount(){var s,r;(r=(s=this.props).get)==null||r.call(s)}componentWillUnmount(){this.props.reset()}render(){var d,l;if(!((d=this.props.content)!=null&&d.cms)||!((l=this.props.backend)!=null&&l.users))return;let{content:{cms:{pages:{components:{list:{action:s,see:r}},backend:{pages:{users:{title:c,add:f,index:m,form:o}}}}}},backend:{users:{loading:u,error:g,message:k,users:n,total:N}}}=this.props;const b=e.jsx(e.Fragment,{children:e.jsx(I,{err:g})}),y=this.props.location.state?e.jsx(j,{time:5e3,message:this.props.location.state.message}):null,F=e.jsx(j,{message:k});n||(n=[]);const T=n.map(t=>D(t,{created_at:S(t.created_at),photo:t.photo&&e.jsxs("div",{className:"d-flex",children:[e.jsx("span",{children:r}),e.jsx("span",{className:"ml-auto",children:e.jsx(P,{title:`${o.user_photo}: ${t.name}`,content:e.jsx("img",{src:t.photo,className:"w-100"}),children:e.jsx(i,{icon:p,className:"text-green mr-2",fixedWidth:!0})})})]}),action:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{to:`/user/users/${t.id}`,className:"mx-1",children:e.jsx(i,{icon:p,className:"text-green",fixedWidth:!0})}),e.jsx(x,{to:`/user/users/${t.id}/edit`,className:"mx-1",children:e.jsx(i,{icon:_,className:"text-brokenblue",fixedWidth:!0})}),e.jsx("span",{className:"mx-1",children:e.jsx(A,{deleteAction:()=>this.props.delete(t.id),children:e.jsx(i,{icon:$,className:"text-red",fixedWidth:!0})})})]})})),U=e.jsx(e.Fragment,{children:e.jsx(v,{children:e.jsx(B,{array:T,loading:u,data:JSON.stringify(n),get:this.props.get,total:N,bordered:!0,add:f,link:"/user/users/add",icon:h,title:m,className:"shadow-sm",fields:[{name:o.full_name,key:"name"},{name:o.email,key:"email"},{name:o.phone,key:"phone"},{name:o.role,key:"role"},{name:o.photo,key:"photo"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx(E,{main:m,icon:h}),e.jsx(L,{children:c}),e.jsx(R,{children:m})]}),e.jsxs("div",{children:[b,y,F,U]})]})}}const q=a=>({...a}),z=a=>({get:(s,r,c)=>a(V(s,r,c)),delete:s=>a(C(s)),reset:()=>a(J())}),re=W(q,z)(M);export{re as default};
