var F=Object.defineProperty;var y=(o,a,e)=>a in o?F(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e;var m=(o,a,e)=>y(o,typeof a!="symbol"?a+"":a,e);import{c as C,r as H,j as s,C as S,R as f,b7 as x,b8 as A,a as T}from"./index-BncDn27B.js";import{B as w,S as N,a as D}from"./Subtitle-EIBA-Hk5.js";import{e as q}from"./Error-CC8F97pB.js";import{F as v,a as B}from"./Input-BldVOD2V.js";import{S as R}from"./index-3VnVM_zO.js";import{T as E}from"./index-C0jNRMwo.js";import{F as P}from"./Feedback-C0SvNv4r.js";import{a as U,p as W,b as _,r as $}from"./features-BGWhQVVm.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const k={name:"",prefix:"",add:!1};class I extends H.Component{constructor(){super(...arguments);m(this,"state",{...k});m(this,"saveHandler",e=>{var t,r,i,n,p;e.preventDefault(),this.props.edit?(i=(r=this.props).patch)==null||i.call(r,(t=this.props.match)==null?void 0:t.params.id,e.target):(p=(n=this.props).post)==null||p.call(n,e.target)});m(this,"saveAddHandler",()=>this.setState({add:!0},()=>{var e,t;return(t=(e=this.props).post)==null?void 0:t.call(e,document.querySelector("form"))}));m(this,"inputChangeHandler",e=>{const{name:t,value:r,files:i}=e.target;this.setState({[t]:i?i[0]:r})})}componentDidMount(){var e,t,r,i;(t=(e=this.props).reset)==null||t.call(e),this.props.edit&&this.props.match&&((i=(r=this.props).show)==null||i.call(r,this.props.match.params.id))}componentDidUpdate(e){var t,r,i,n,p,l,c,h,u;if(!((r=(t=e.backend)==null?void 0:t.features)!=null&&r.message)&&((n=(i=this.props.backend)==null?void 0:i.features)!=null&&n.message)&&this.props.backend.features.message.type==="success"&&!this.props.edit&&(this.state.add?this.setState({...k}):(p=this.props.history)==null||p.push({pathname:"/admin/features",state:{message:this.props.backend.features.message}})),!((c=(l=e.backend)==null?void 0:l.features)!=null&&c.feature)&&((u=(h=this.props.backend)==null?void 0:h.features)!=null&&u.feature)){const{backend:{features:{feature:d}}}=this.props;this.setState({...d})}}componentWillUnmount(){var e,t;(t=(e=this.props).reset)==null||t.call(e)}render(){var g,b;if(!((g=this.props.content)!=null&&g.cms)||!((b=this.props.backend)!=null&&b.features))return null;let{content:{cms:{pages:{backend:{pages:{features:{title:e,add:t,edit:r,index:i,form:n}}}}}},backend:{features:{loading:p,error:l,message:c}}}=this.props,{name:h,prefix:u}=this.state,d=null,j=null;return p?d=s.jsx(S,{xs:12,children:s.jsx(T,{})}):(j=s.jsx(s.Fragment,{children:s.jsx(q,{err:l})}),d=s.jsx(s.Fragment,{children:s.jsxs(S,{xl:9,children:[s.jsx(P,{message:c}),this.props.edit&&s.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),s.jsx("div",{className:"shadow-lg rounded-8 bg-white px-4 px-sm-5 py-3 py-sm-4",children:s.jsxs(f,{className:"my-2 my-sm-3",children:[s.jsx("div",{className:"col-lg-9",children:s.jsxs(f,{children:[s.jsx(v,{type:"text",className:"col-md-6",icon:x,onChange:this.inputChangeHandler,value:h,name:"name",required:!0,placeholder:n.name}),s.jsx(v,{type:"text",className:"col-md-6",icon:A,onChange:this.inputChangeHandler,value:u,name:"prefix",required:!0,placeholder:n.prefix})]})}),s.jsx(R,{edit:!!this.props.edit,saveAddHandler:this.saveAddHandler})]})})]})})),s.jsxs(s.Fragment,{children:[s.jsxs(E,{children:[s.jsx(w,{items:this.props.edit?[{to:"/admin/features",content:i}]:void 0,main:this.props.edit?r:t,icon:x}),s.jsx(N,{children:e}),s.jsx(D,{children:this.props.edit?r:t})]}),s.jsxs("div",{children:[j,s.jsx(f,{children:s.jsx(B,{onSubmit:this.saveHandler,icon:x,title:this.props.edit?r:t,list:i,link:"/admin/features",innerClassName:"row justify-content-center",children:d})})]})]})}}const M=o=>({...o}),V=o=>({show:a=>o(U(a)),post:a=>o(W(a)),patch:(a,e)=>o(_(a,e)),reset:()=>o($())}),ae=C(M,V)(I);export{ae as default};
