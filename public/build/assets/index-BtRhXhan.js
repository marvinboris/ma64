import{c as C,r as E,j as e,u as L,m as O,L as h,F as m,i as _,k as w,n as I,R as J,N as R}from"./index-BncDn27B.js";import{B as $,S as y,a as A}from"./Subtitle-EIBA-Hk5.js";import{D as B,L as M}from"./Delete-DN_4O9m9.js";import{e as U}from"./Error-CC8F97pB.js";import{F as g}from"./Feedback-C0SvNv4r.js";import{T as q}from"./index-C0jNRMwo.js";import{g as z,d as G,r as H}from"./post-categories-D8n_eiXp.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const u="th-list";class K extends E.Component{componentDidMount(){var s,o;(o=(s=this.props).get)==null||o.call(s)}componentWillUnmount(){this.props.reset()}render(){var l,p,x;if(!((l=this.props.content)!=null&&l.cms)||!((p=this.props.backend)!=null&&p.post_categories)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:s}},backend:{pages:{post_categories:{title:o,add:n,index:c,form:d}}}}}},backend:{post_categories:{loading:j,error:f,message:k,post_categories:i,total:N}},auth:{data:{role:{features:b}}}}=this.props;const a=b.find(t=>t.prefix==="post-categories"),S=!a&&e.jsx(R,{to:"/user/dashboard"}),F=e.jsx(e.Fragment,{children:e.jsx(U,{err:f})}),v=this.props.location.state?e.jsx(g,{time:5e3,message:this.props.location.state.message}):null,T=e.jsx(g,{message:k}),D=localStorage.getItem("lang")||"";i||(i=[]);const P=i.map(t=>L(t,{created_at:O(t.created_at),name:t.name[D],action:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{to:`/user/post-categories/${t.id}`,className:"mx-1",children:e.jsx(m,{icon:_,className:"text-green",fixedWidth:!0})}),JSON.parse((a==null?void 0:a.permissions)||"[]").includes("u")&&e.jsx(h,{to:`/user/post-categories/${t.id}/edit`,className:"mx-1",children:e.jsx(m,{icon:w,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((a==null?void 0:a.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(B,{deleteAction:()=>this.props.delete(t.id),children:e.jsx(m,{icon:I,className:"text-red",fixedWidth:!0})})})]})})),W=e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx(M,{array:P,loading:j,data:JSON.stringify(i),get:this.props.get,total:N,bordered:!0,add:n,link:"/user/post-categories/add",icon:u,title:c,className:"shadow-sm",fields:[{name:d.name,key:"name"},{name:d.slug,key:"slug"},{name:d.is_active,key:"is_active"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[e.jsx($,{main:c,icon:u}),e.jsx(y,{children:o}),e.jsx(A,{children:c})]}),e.jsxs("div",{children:[S,F,v,T,W]})]})}}const Q=r=>({...r}),V=r=>({get:(s,o,n)=>r(z(s,o,n)),delete:s=>r(G(s)),reset:()=>r(H())}),ne=C(Q,V)(K);export{ne as default};
