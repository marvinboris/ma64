import{c as D,r as L,j as e,u as W,m as E,L as h,F as m,i as M,k as O,n as w,R as J,aP as u,N as P}from"./index-BncDn27B.js";import{B as R,S as $,a as A}from"./Subtitle-EIBA-Hk5.js";import{D as B,L as I}from"./Delete-DN_4O9m9.js";import{e as C}from"./Error-CC8F97pB.js";import{F as j}from"./Feedback-C0SvNv4r.js";import{T as U}from"./index-C0jNRMwo.js";import{g as q,d as z,r as G}from"./methods-CLJ3OfNT.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";class H extends L.Component{componentDidMount(){var s,o;(o=(s=this.props).get)==null||o.call(s)}componentWillUnmount(){this.props.reset()}render(){var l,p,x;if(!((l=this.props.content)!=null&&l.cms)||!((p=this.props.backend)!=null&&p.methods)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:s}},backend:{pages:{methods:{title:o,add:d,index:c,form:i}}}}}},backend:{methods:{loading:f,error:g,message:k,methods:n,total:N}},auth:{data:{role:{features:b}}}}=this.props;const t=b.find(a=>a.prefix==="methods"),y=!t&&e.jsx(P,{to:"/user/dashboard"}),F=e.jsx(e.Fragment,{children:e.jsx(C,{err:g})}),S=this.props.location.state?e.jsx(j,{time:5e3,message:this.props.location.state.message}):null,T=e.jsx(j,{message:k});n||(n=[]);const _=n.map(a=>W(a,{created_at:E(a.created_at),action:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{to:`/user/methods/${a.id}`,className:"mx-1",children:e.jsx(m,{icon:M,className:"text-green",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("u")&&e.jsx(h,{to:`/user/methods/${a.id}/edit`,className:"mx-1",children:e.jsx(m,{icon:O,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(B,{deleteAction:()=>this.props.delete(a.id),children:e.jsx(m,{icon:w,className:"text-red",fixedWidth:!0})})})]})})),v=e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx(I,{array:_,loading:f,data:JSON.stringify(n),get:this.props.get,total:N,bordered:!0,add:d,link:"/user/methods/add",icon:u,title:c,className:"shadow-sm",fields:[{name:i.name,key:"name"},{name:i.text,key:"text"},{name:i.is_active,key:"is_active"},{name:i.created_at,key:"created_at"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(R,{main:c,icon:u}),e.jsx($,{children:o}),e.jsx(A,{children:c})]}),e.jsxs("div",{children:[y,F,S,T,v]})]})}}const K=r=>({...r}),Q=r=>({get:(s,o,d)=>r(q(s,o,d)),delete:s=>r(z(s)),reset:()=>r(G())}),ie=D(K,Q)(H);export{ie as default};
