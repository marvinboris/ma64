var k=Object.defineProperty;var F=(r,o,s)=>o in r?k(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s;var p=(r,o,s)=>F(r,typeof o!="symbol"?o+"":o,s);import{c as M,r as v,u as w,j as e,b1 as $,R as y,a$ as b,C as m,b2 as D,p as H,a as L}from"./index-BncDn27B.js";import{N as B,T as I,a as P}from"./TabPane-Dffaj7Z7.js";import{B as W,S as A,a as E}from"./Subtitle-EIBA-Hk5.js";import{e as J}from"./Error-CC8F97pB.js";import{a as R,F as g}from"./Input-BldVOD2V.js";import{b as _}from"./BetweenButton-CNQ28UJ2.js";import{F as G}from"./Feedback-C0SvNv4r.js";import{g as O,p as U,r as V}from"./cms-Dgxu_C9N.js";import{o as f}from"./types-DL2rpS-Q.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const x=({sm:r=!1})=>e.jsx(m,{xs:12,className:`mb-${r?2:3}`}),q=({general:r,language:o})=>{const[s,a]=v.useState(r),t=`${o.abbr}[general]`,l=["Date","Time","Home"].map(n=>e.jsx(g,{type:"text",placeholder:n,className:"col-md-6 col-lg-4",name:`${t}[${n.toLowerCase()}]`,value:s==null?void 0:s[n.toLowerCase()],addon:e.jsx("span",{className:"text-small text-700",children:n}),onChange:c=>f(s,a)(c,n.toLowerCase())},Math.random())),h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((n,c)=>e.jsx(g,{type:"text",className:"col-md-6 col-lg-4",name:`${t}[days][]`,placeholder:n,value:s==null?void 0:s.days[c],addon:e.jsx("span",{className:"text-small text-700",children:n}),onChange:d=>f(s,a)(d,"days",c)},Math.random())),j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((n,c)=>e.jsx(g,{type:"text",placeholder:n,name:`${t}[months][]`,value:s==null?void 0:s.months[c],className:"col-md-6 col-lg-4",addon:e.jsx("span",{className:"text-small text-700",children:n}),onChange:d=>f(s,a)(d,"months",c)},Math.random()));return e.jsx(e.Fragment,{children:e.jsxs(y,{children:[l,e.jsx(x,{}),e.jsx(m,{xs:12,children:e.jsx("h4",{children:"Week days"})}),e.jsx(x,{sm:!0}),h,e.jsx(x,{}),e.jsx(m,{xs:12,children:e.jsx("h4",{children:"Months"})}),e.jsx(x,{sm:!0}),j]})})};class z extends v.Component{constructor(){super(...arguments);p(this,"state",{activeTab:"fr"});p(this,"submitHandler",async s=>{var a,t;s.preventDefault(),await((t=(a=this.props).patch)==null?void 0:t.call(a,s.target))});p(this,"inputChangeHandler",s=>{const{name:a,value:t,files:l}=s.target;this.setState({[a]:l?l[0]:t})});p(this,"fileUpload",()=>{var s;return(s=document.getElementById("logo"))==null?void 0:s.click()});p(this,"toggle",s=>{this.state.activeTab!==s&&this.setState({activeTab:s})})}static getDerivedStateFromProps(s,a){var t,l;if((l=(t=s.backend)==null?void 0:t.cms)!=null&&l.cms&&a.app_name===""){const{backend:{cms:{cms:{general:h}}}}=s;return w(a,{...h})}return a}async componentDidMount(){var s,a,t,l;(a=(s=this.props).reset)==null||a.call(s),(l=(t=this.props).get)==null||l.call(t)}componentWillUnmount(){var s,a;(a=(s=this.props).reset)==null||a.call(s)}render(){var N;if(!this.props.content||!((N=this.props.backend)!=null&&N.cms))return null;let{content:{cms:{pages:{components:{form:{save:s}},backend:{pages:{cms:{title:a,general:t}}}}}},backend:{cms:{loading:l,error:h,message:j,cms:n,languages:c}}}=this.props;const{activeTab:d}=this.state;let u=null,C=null;if(l)u=e.jsx(m,{xs:12,children:e.jsx(L,{})});else{C=e.jsx(e.Fragment,{children:e.jsx(J,{err:h})}),c||(c=[]);const S=c.map(i=>e.jsx($,{children:e.jsx(B,{className:d===i.abbr?"active":void 0,onClick:()=>this.toggle(i.abbr),children:i.name})},Math.random())),T=c.map(i=>e.jsx(I,{tabId:i.abbr,children:e.jsx(q,{language:i,general:n==null?void 0:n.pages[i.abbr].general})},Math.random()));u=e.jsx(e.Fragment,{children:e.jsx(y,{children:e.jsx(R,{onSubmit:this.submitHandler,icon:b,title:t,link:"/admin/cms",innerClassName:"row",className:"shadow-sm",children:e.jsxs(m,{lg:12,children:[e.jsx(G,{message:j}),e.jsxs(y,{children:[e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx(m,{lg:2,children:e.jsx(D,{tabs:!0,vertical:!0,pills:!0,children:S})}),e.jsx(m,{lg:10,children:e.jsx(P,{activeTab:d,children:T})}),e.jsx("div",{className:"col-12",children:e.jsx(_,{color:"green",icon:H,children:s})})]})]})})})})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[e.jsx(W,{main:t,icon:b}),e.jsx(A,{user:!0,icon:b,children:a}),e.jsx(E,{user:!0,children:t})]}),e.jsxs("div",{className:"p-4 pb-0",children:[C,u]})]})}}const K=r=>({...r}),Q=r=>({get:()=>r(O()),patch:o=>r(U("general",o)),reset:()=>r(V())}),de=M(K,Q)(z);export{de as default};
