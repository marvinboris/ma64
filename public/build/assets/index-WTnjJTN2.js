import{c as W,r as _,j as e,u as v,m as E,L as h,F as c,i as L,k as O,n as w,R as J,N as R}from"./index-BncDn27B.js";import{B as $,S as A,a as I}from"./Subtitle-EIBA-Hk5.js";import{D as P,L as C}from"./Delete-DN_4O9m9.js";import{e as M}from"./Error-CC8F97pB.js";import{F as u}from"./Feedback-C0SvNv4r.js";import{T as U}from"./index-C0jNRMwo.js";import{g as q,d as z,r as G}from"./brands-B_Kft5ON.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const j="th-list";class H extends _.Component{componentDidMount(){var s,n;(n=(s=this.props).get)==null||n.call(s)}componentWillUnmount(){this.props.reset()}render(){var l,p,x;if(!((l=this.props.content)!=null&&l.cms)||!((p=this.props.backend)!=null&&p.brands)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:s}},backend:{pages:{brands:{title:n,add:i,index:d,form:m}}}}}},backend:{brands:{loading:f,error:g,message:b,brands:o,total:N}},auth:{data:{role:{features:k}}}}=this.props;const t=k.find(a=>a.prefix==="brands"),F=!t&&e.jsx(R,{to:"/user/dashboard"}),S=e.jsx(e.Fragment,{children:e.jsx(M,{err:g})}),y=this.props.location.state?e.jsx(u,{time:5e3,message:this.props.location.state.message}):null,T=e.jsx(u,{message:b});o||(o=[]);const B=o.map(a=>v(a,{created_at:E(a.created_at),action:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{to:`/user/brands/${a.id}`,className:"mx-1",children:e.jsx(c,{icon:L,className:"text-green",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("u")&&e.jsx(h,{to:`/user/brands/${a.id}/edit`,className:"mx-1",children:e.jsx(c,{icon:O,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(P,{deleteAction:()=>this.props.delete(a.id),children:e.jsx(c,{icon:w,className:"text-red",fixedWidth:!0})})})]})})),D=e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx(C,{array:B,loading:f,data:JSON.stringify(o),get:this.props.get,total:N,bordered:!0,add:i,link:"/user/brands/add",icon:j,title:d,className:"shadow-sm",fields:[{name:m.name,key:"name"},{name:m.created_at,key:"created_at"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx($,{main:d,icon:j}),e.jsx(A,{children:n}),e.jsx(I,{children:d})]}),e.jsxs("div",{children:[F,S,y,T,D]})]})}}const K=r=>({...r}),Q=r=>({get:(s,n,i)=>r(q(s,n,i)),delete:s=>r(z(s)),reset:()=>r(G())}),oe=W(K,Q)(H);export{oe as default};
