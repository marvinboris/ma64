var L=Object.defineProperty;var M=(n,a,s)=>a in n?L(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var l=(n,a,s)=>M(n,typeof a!="symbol"?a+"":a,s);import{c as R,r as I,u as U,j as e,b1 as D,R as b,a$ as k,C as d,b2 as F,p as O,a as W}from"./index-BncDn27B.js";import{N as y,T as v,a as A}from"./TabPane-Dffaj7Z7.js";import{B as z,S as q,a as G}from"./Subtitle-EIBA-Hk5.js";import{e as J}from"./Error-CC8F97pB.js";import{a as K}from"./Input-BldVOD2V.js";import{b as Q}from"./BetweenButton-CNQ28UJ2.js";import{F as X}from"./Feedback-C0SvNv4r.js";import{g as Y,p as Z,r as ee}from"./cms-Dgxu_C9N.js";import{A as S}from"./Auth-QVvALckm.js";import{r as $}from"./types-DL2rpS-Q.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const se=({auth:n,language:a})=>{const[s,r]=I.useState(a.abbr+"-footer"),[t,o]=I.useState(n),p=x=>{s!==x&&r(x)},g=Object.keys(n||{}).map(x=>{const T=`${a.abbr}-${x}`;return e.jsx(D,{children:e.jsx(y,{className:s===T?"active":void 0,onClick:()=>p(T),children:e.jsx("span",{className:"text-capitalize",children:x})})},T)}),i=`${a.abbr}[auth]`,m=S.footer,u=`${i}[footer]`,h=t==null?void 0:t.footer,j=["footer"],f=$(t,o)(m,u,h,j),N=S.user,C=`${i}[user]`,c=t==null?void 0:t.user,V=["user"],w=$(t,o)(N,C,c,V),H=S.admin,_=`${i}[admin]`,B=t==null?void 0:t.admin,P=["admin"],E=$(t,o)(H,_,B,P,[{regex:`${i}[admin][login][sign_in_to]`,action:()=>e.jsx(d,{xs:12,children:e.jsx("h4",{children:"Login"})})},{regex:`${i}[admin][verify][enter]`,action:()=>e.jsx(d,{xs:12,children:e.jsx("h4",{children:"Verify"})})}]);return e.jsxs(e.Fragment,{children:[e.jsx(F,{tabs:!0,pills:!0,children:g}),e.jsxs(A,{activeTab:s,children:[e.jsx(v,{tabId:a.abbr+"-footer",className:"pt-4",children:e.jsx(b,{children:f})}),e.jsx(v,{tabId:a.abbr+"-user",className:"pt-4",children:e.jsx(b,{children:w})}),e.jsx(v,{tabId:a.abbr+"-admin",className:"pt-4",children:e.jsx(b,{children:E})})]})]})};class te extends I.Component{constructor(){super(...arguments);l(this,"state",{activeTab:"fr"});l(this,"submitHandler",async s=>{var r,t;s.preventDefault(),await((t=(r=this.props).patch)==null?void 0:t.call(r,s.target))});l(this,"inputChangeHandler",s=>{const{name:r,value:t,files:o}=s.target;this.setState({[r]:o?o[0]:t})});l(this,"fileUpload",()=>{var s;return(s=document.getElementById("logo"))==null?void 0:s.click()});l(this,"toggle",s=>{this.state.activeTab!==s&&this.setState({activeTab:s})})}static getDerivedStateFromProps(s,r){var t,o;if((o=(t=s.backend)==null?void 0:t.cms)!=null&&o.cms&&r.app_name===""){const{backend:{cms:{cms:{auth:p}}}}=s;return U(r,{...p})}return r}async componentDidMount(){var s,r,t,o;(r=(s=this.props).reset)==null||r.call(s),(o=(t=this.props).get)==null||o.call(t)}componentWillUnmount(){var s,r;(r=(s=this.props).reset)==null||r.call(s)}render(){var f;if(!this.props.content||!((f=this.props.backend)!=null&&f.cms))return null;let{content:{cms:{pages:{components:{form:{save:s}},backend:{pages:{cms:{title:r,auth:t}}}}}},backend:{cms:{loading:o,error:p,message:g,cms:i,languages:m}}}=this.props;const{activeTab:u}=this.state;let h=null,j=null;if(o)h=e.jsx(d,{xs:12,children:e.jsx(W,{})});else{j=e.jsx(e.Fragment,{children:e.jsx(J,{err:p})}),m||(m=[]);const N=m.map(c=>e.jsx(D,{children:e.jsx(y,{className:u===c.abbr?"active":void 0,onClick:()=>this.toggle(c.abbr),children:c.name})},Math.random())),C=m.map(c=>e.jsx(v,{tabId:c.abbr,children:e.jsx(se,{auth:i==null?void 0:i.pages[c.abbr].auth,language:c})},Math.random()));h=e.jsx(e.Fragment,{children:e.jsx(b,{children:e.jsx(K,{onSubmit:this.submitHandler,icon:k,title:t,link:"/admin/cms",innerClassName:"row",className:"shadow-sm",children:e.jsxs(d,{lg:12,children:[e.jsx(X,{message:g}),e.jsxs(b,{children:[e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx(d,{lg:2,children:e.jsx(F,{tabs:!0,vertical:!0,pills:!0,children:N})}),e.jsx(d,{lg:10,children:e.jsx(A,{activeTab:u,children:C})}),e.jsx("div",{className:"col-12",children:e.jsx(Q,{color:"green",icon:O,children:s})})]})]})})})})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[e.jsx(z,{main:t,icon:k}),e.jsx(q,{user:!0,icon:k,children:r}),e.jsx(G,{user:!0,children:t})]}),e.jsxs("div",{className:"p-4 pb-0",children:[j,h]})]})}}const re=n=>({...n}),ae=n=>({get:()=>n(Y()),patch:a=>n(Z("auth",a)),reset:()=>n(ee())}),ge=R(re,ae)(te);export{ge as default};
