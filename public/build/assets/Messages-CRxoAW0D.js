var P=Object.defineProperty;var A=(r,n,e)=>n in r?P(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e;var h=(r,n,e)=>A(r,typeof n!="symbol"?n+"":n,e);import{c as B,r as C,u as H,j as s,b1 as k,R as f,a$ as N,C as l,b2 as F,p as V,a as _}from"./index-BncDn27B.js";import{N as I,T,a as M}from"./TabPane-Dffaj7Z7.js";import{B as O,S as R,a as U}from"./Subtitle-EIBA-Hk5.js";import{e as L}from"./Error-CC8F97pB.js";import{a as W}from"./Input-BldVOD2V.js";import{b as z}from"./BetweenButton-CNQ28UJ2.js";import{F as G}from"./Feedback-C0SvNv4r.js";import{g as q,p as J,r as K}from"./cms-Dgxu_C9N.js";import{M as S}from"./Messages-DJYfvaFB.js";import{r as $}from"./types-DL2rpS-Q.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const Q=({sm:r=!1})=>s.jsx(l,{xs:12,className:`mb-${r?2:3}`}),X=({messages:r,language:n})=>{const[e,a]=C.useState(n.abbr+"-auth"),[t,c]=C.useState(r),u=i=>{e!==i&&a(i)},g=Object.keys(r||{}).map(i=>{const o=`${n.abbr}-${i}`;return s.jsx(k,{children:s.jsx(I,{onClick:()=>u(o),className:e===o?"active":void 0,children:s.jsx("span",{className:"text-capitalize",children:i})})},o)}),m=`${n.abbr}[messages]`,d=S.auth,p=`${m}[auth]`,x=t==null?void 0:t.auth,b=["auth"],j=$(t,c)(d,p,x,b,[{regex:`${p}[admin][not_found]`,action:()=>s.jsx(l,{xs:12,children:s.jsx("h4",{children:"Admin"})})},{regex:`${p}[user][inactive]`,action:()=>s.jsxs(s.Fragment,{children:[s.jsx(Q,{}),s.jsx(l,{xs:12,children:s.jsx("h4",{children:"User"})})]})}]),v=Object.keys(S).map(i=>{const o=S[i],D=`${m}[${i}]`,y=t==null?void 0:t[i],w=[i],E=$(t,c)(o,D,y,w);return s.jsx(T,{tabId:`${n.abbr}-${i}`,className:"pt-4",children:s.jsx(f,{children:E})},Math.random())});return s.jsxs(s.Fragment,{children:[s.jsx(F,{tabs:!0,pills:!0,children:g}),s.jsxs(M,{activeTab:e,children:[s.jsx(T,{tabId:n.abbr+"-auth",className:"pt-4",children:s.jsx(f,{children:j})}),v]})]})};class Y extends C.Component{constructor(){super(...arguments);h(this,"state",{activeTab:"fr"});h(this,"submitHandler",async e=>{var a,t;e.preventDefault(),await((t=(a=this.props).patch)==null?void 0:t.call(a,e.target))});h(this,"inputChangeHandler",e=>{const{name:a,value:t,files:c}=e.target;this.setState({[a]:c?c[0]:t})});h(this,"fileUpload",()=>{var e;return(e=document.getElementById("logo"))==null?void 0:e.click()});h(this,"toggle",e=>{this.state.activeTab!==e&&this.setState({activeTab:e})})}static getDerivedStateFromProps(e,a){var t,c;if((c=(t=e.backend)==null?void 0:t.cms)!=null&&c.cms&&a.app_name===""){const{backend:{cms:{cms:{messages:u}}}}=e;return H(a,{...u})}return a}async componentDidMount(){var e,a,t,c;(a=(e=this.props).reset)==null||a.call(e),(c=(t=this.props).get)==null||c.call(t)}componentWillUnmount(){var e,a;(a=(e=this.props).reset)==null||a.call(e)}render(){var j;if(!this.props.content||!((j=this.props.backend)!=null&&j.cms))return null;let{content:{cms:{pages:{components:{form:{save:e}},backend:{pages:{cms:{title:a,messages:t}}}}}},backend:{cms:{loading:c,error:u,message:g,cms:m,languages:d}}}=this.props;const{activeTab:p}=this.state;let x=null,b=null;if(c)x=s.jsx(l,{xs:12,children:s.jsx(_,{})});else{b=s.jsx(s.Fragment,{children:s.jsx(L,{err:u})}),d||(d=[]);const v=d.map(o=>s.jsx(k,{children:s.jsx(I,{className:p===o.abbr?"active":void 0,onClick:()=>this.toggle(o.abbr),children:o.name})},Math.random())),i=d.map(o=>s.jsx(T,{tabId:o.abbr,children:s.jsx(X,{language:o,messages:m==null?void 0:m.pages[o.abbr].messages})},Math.random()));x=s.jsx(s.Fragment,{children:s.jsx(f,{children:s.jsx(W,{onSubmit:this.submitHandler,icon:N,title:t,link:"/admin/cms",innerClassName:"row",className:"shadow-sm",children:s.jsxs(l,{lg:12,children:[s.jsx(G,{message:g}),s.jsxs(f,{children:[s.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),s.jsx(l,{lg:2,children:s.jsx(F,{tabs:!0,vertical:!0,pills:!0,children:v})}),s.jsx(l,{lg:10,children:s.jsx(M,{activeTab:p,children:i})}),s.jsx("div",{className:"col-12",children:s.jsx(z,{color:"green",icon:V,children:e})})]})]})})})})}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[s.jsx(O,{main:t,icon:N}),s.jsx(R,{user:!0,icon:N,children:a}),s.jsx(U,{user:!0,children:t})]}),s.jsxs("div",{className:"p-4 pb-0",children:[b,x]})]})}}const Z=r=>({...r}),ss=r=>({get:()=>r(q()),patch:n=>r(J("messages",n)),reset:()=>r(K())}),bs=B(Z,ss)(Y);export{bs as default};
