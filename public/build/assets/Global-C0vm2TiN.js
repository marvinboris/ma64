var _=Object.defineProperty;var F=(a,o,s)=>o in a?_(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s;var i=(a,o,s)=>F(a,typeof o!="symbol"?o+"":o,s);import{c as N,r as S,u as w,j as e,R as x,a$ as d,C as u,b0 as j,p as H,F as B,f as D,a as T}from"./index-BncDn27B.js";import{B as $,S as E,a as I}from"./Subtitle-EIBA-Hk5.js";import{e as P}from"./Error-CC8F97pB.js";import{a as R,F as b}from"./Input-BldVOD2V.js";import{b as U}from"./BetweenButton-CNQ28UJ2.js";import{F as W}from"./Feedback-C0SvNv4r.js";import{g as q,p as z,r as A}from"./cms-Dgxu_C9N.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";class G extends S.Component{constructor(){super(...arguments);i(this,"state",{logo:null,app_name:"",company_name:""});i(this,"submitHandler",async s=>{var t,n;s.preventDefault(),await((n=(t=this.props).patch)==null?void 0:n.call(t,s.target))});i(this,"inputChangeHandler",s=>{const{name:t,value:n,files:r}=s.target;this.setState({[t]:r?r[0]:n})});i(this,"fileUpload",()=>{var s;return(s=document.getElementById("logo"))==null?void 0:s.click()})}static getDerivedStateFromProps(s,t){var n,r;if((r=(n=s.backend)==null?void 0:n.cms)!=null&&r.cms&&t.app_name===""){const{backend:{cms:{cms:{global:l}}}}=s;return w(t,{...l})}return t}async componentDidMount(){var s,t,n,r;(t=(s=this.props).reset)==null||t.call(s),(r=(n=this.props).get)==null||r.call(n)}componentWillUnmount(){var s,t;(t=(s=this.props).reset)==null||t.call(s)}render(){var g;if(!this.props.content||!((g=this.props.backend)!=null&&g.cms))return null;let{content:{cms:{pages:{components:{form:{save:s,selected_file:t}},backend:{pages:{cms:{title:n,global:r,form:l}}}}}},backend:{cms:{loading:f,error:C,message:v,cms:m}}}=this.props;const{logo:c,app_name:y,company_name:k}=this.state;let p=null,h=null;return f?p=e.jsx(u,{xs:12,children:e.jsx(T,{})}):(h=e.jsx(e.Fragment,{children:e.jsx(P,{err:C})}),p=e.jsx(e.Fragment,{children:e.jsx(x,{children:e.jsxs(R,{onSubmit:this.submitHandler,icon:d,title:r,link:"/admin/cms",innerClassName:"row",className:"shadow-sm",children:[e.jsxs(u,{lg:8,children:[e.jsx(W,{message:v}),e.jsxs(x,{children:[e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx(b,{type:"text",className:"col-md-6",icon:j,onChange:this.inputChangeHandler,value:y,name:"app_name",required:!0,placeholder:l.app_name}),e.jsx(b,{type:"text",className:"col-md-6",icon:j,onChange:this.inputChangeHandler,value:k,name:"company_name",required:!0,placeholder:l.company_name}),e.jsx("input",{type:"file",id:"logo",name:"logo",className:"d-none",onChange:this.inputChangeHandler,accept:".png,.jpg,.jpeg"}),e.jsx("div",{className:"col-12",children:e.jsx(U,{color:"green",icon:H,children:s})})]})]}),e.jsx(u,{lg:4,children:e.jsx("div",{className:"embed-responsive embed-responsive-1by1 bg-soft border border-light d-flex justify-content-center align-items-center w-60 mx-auto",style:{cursor:"pointer",background:c?`url("${c}") no-repeat center`:void 0,backgroundSize:"contain"},onClick:this.fileUpload,children:c&&c!==(m==null?void 0:m.global.logo)&&e.jsxs("div",{className:"text-center text-green",children:[e.jsx("div",{children:e.jsx(B,{icon:D,fixedWidth:!0,size:"5x"})}),e.jsx("div",{className:"mt-3",children:t})]})})})]})})})),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[e.jsx($,{main:r,icon:d}),e.jsx(E,{user:!0,icon:d,children:n}),e.jsx(I,{user:!0,children:r})]}),e.jsxs("div",{className:"p-4 pb-0",children:[h,p]})]})}}const M=a=>({...a}),O=a=>({get:()=>a(q()),patch:o=>a(z("global",o)),reset:()=>a(A())}),ne=N(M,O)(G);export{ne as default};
