var A=Object.defineProperty;var L=(i,t,s)=>t in i?A(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var p=(i,t,s)=>L(i,typeof t!="symbol"?t+"":t,s);import{c as T,r as q,j as e,C as k,R as f,o as g,a as D}from"./index-BncDn27B.js";import{B as _,S as B,a as R}from"./Subtitle-EIBA-Hk5.js";import{e as $}from"./Error-CC8F97pB.js";import{F as j,a as E}from"./Input-BldVOD2V.js";import{S as P}from"./index-3VnVM_zO.js";import{T as U}from"./index-C0jNRMwo.js";import{F as W}from"./Feedback-C0SvNv4r.js";import{a as I,p as M,b as O,r as V}from"./languages-CMnUc65G.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const H={name:"",abbr:"",flag:"",add:!1};class z extends q.Component{constructor(){super(...arguments);p(this,"state",{...H});p(this,"saveHandler",s=>{var a,n,r,o,l;s.preventDefault(),this.props.edit?(r=(n=this.props).patch)==null||r.call(n,(a=this.props.match)==null?void 0:a.params.id,s.target):(l=(o=this.props).post)==null||l.call(o,s.target)});p(this,"saveAddHandler",()=>this.setState({add:!0},()=>{var s,a;return(a=(s=this.props).post)==null?void 0:a.call(s,document.querySelector("form"))}));p(this,"inputChangeHandler",s=>{const{name:a,value:n,files:r}=s.target;this.setState({[a]:r?r[0]:n})})}componentDidMount(){var s,a,n,r,o;(a=(s=this.props).reset)==null||a.call(s),this.props.edit&&this.props.match&&((o=(r=this.props).show)==null||o.call(r,(n=this.props.match)==null?void 0:n.params.id))}componentDidUpdate(s){var a,n,r,o,l,d,c,m,h;if(!((n=(a=s.backend)==null?void 0:a.languages)!=null&&n.message)&&((o=(r=this.props.backend)==null?void 0:r.languages)!=null&&o.message)&&this.props.backend.languages.message.type==="success"&&!this.props.edit&&(this.state.add?this.setState({...H}):(l=this.props.history)==null||l.push({pathname:"/admin/languages",state:{message:this.props.backend.languages.message}})),!((c=(d=s.backend)==null?void 0:d.languages)!=null&&c.language)&&((h=(m=this.props.backend)==null?void 0:m.languages)!=null&&h.language)){const{backend:{languages:{language:u}}}=this.props;this.setState({...u})}}componentWillUnmount(){var s,a;(a=(s=this.props).reset)==null||a.call(s)}render(){var y,C;if(!((y=this.props.content)!=null&&y.cms)||!((C=this.props.backend)!=null&&C.languages))return null;let{content:{cms:{pages:{backend:{pages:{languages:{title:s,add:a,edit:n,index:r,form:o}}}}},countries:l},backend:{languages:{loading:d,error:c,message:m}}}=this.props,{name:h,abbr:u,flag:b}=this.state,x=null,v=null;const N=l.map(({country:S,code:w,name:F})=>e.jsx("option",{value:S,"data-code":w,children:F},S));return d?x=e.jsx(k,{xs:12,children:e.jsx(D,{})}):(v=e.jsx(e.Fragment,{children:e.jsx($,{err:c})}),x=e.jsx(e.Fragment,{children:e.jsxs(k,{xl:9,children:[e.jsx(W,{message:m}),this.props.edit&&e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx("div",{className:"shadow-lg rounded-8 bg-white px-4 px-sm-5 py-3 py-sm-4",children:e.jsxs(f,{className:"my-2 my-sm-3",children:[e.jsx("div",{className:"col-lg-9",children:e.jsxs(f,{children:[e.jsx(j,{type:"text",className:"col-md-6",icon:g,onChange:this.inputChangeHandler,value:h,name:"name",required:!0,placeholder:o.name}),e.jsx(j,{type:"text",className:"col-md-6",icon:g,onChange:this.inputChangeHandler,value:u,name:"abbr",required:!0,placeholder:o.abbr}),e.jsxs(j,{className:"col-md-6",type:"select",addon:e.jsx("span",{className:"text-secondary text-small d-inline-flex",children:e.jsx("div",{className:"rounded-circle overflow-hidden position-relative d-flex justify-content-center align-items-center",style:{width:30,height:30},children:e.jsx("span",{className:`flag-icon text-xx-large position-absolute flag-icon-${b.toLowerCase()}`})})}),onChange:this.inputChangeHandler,value:b,validation:{required:!0},name:"flag",required:!0,placeholder:o.select_flag,children:[e.jsx("option",{value:"",children:o.select_flag}),N]})]})}),e.jsx(P,{edit:!!this.props.edit,saveAddHandler:this.saveAddHandler})]})})]})})),e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(_,{items:this.props.edit?[{to:"/admin/languages",content:r}]:void 0,main:this.props.edit?n:a,icon:g}),e.jsx(B,{children:s}),e.jsx(R,{children:this.props.edit?n:a})]}),e.jsxs("div",{children:[v,e.jsx(f,{children:e.jsx(E,{onSubmit:this.saveHandler,icon:g,title:this.props.edit?n:a,list:r,link:"/admin/languages",innerClassName:"row justify-content-center",children:x})})]})]})}}const G=i=>({...i}),J=i=>({show:t=>i(I(t)),post:t=>i(M(t)),patch:(t,s)=>i(O(t,s)),reset:()=>i(V())}),le=T(G,J)(z);export{le as default};
