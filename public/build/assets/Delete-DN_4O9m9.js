var ue=Object.defineProperty;var je=(d,h,s)=>h in d?ue(d,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[h]=s;var m=(d,h,s)=>je(d,typeof h!="symbol"?h+"":h,s);import{c as fe,r as M,j as e,u as be,C as R,L as Ne,O as P,F as c,af as ye,I as _,ag as ve,ah as ke,ai as Ce,aj as we,ak as He,al as Fe,am as Pe,an as De,ao as $e,ap as Le,aq as Se,ar as Ee,as as Te,at as Ae,au as Re,n as _e,aa as Me}from"./index-BncDn27B.js";import{T as Oe}from"./Table-Cy8UlfKH.js";let v;class Ue extends M.Component{constructor(){super(...arguments);m(this,"state",{show:10,search:"",page:1,pageNumber:1,pageFirst:1,pageSecond:2,pageLast:3});m(this,"inputChangedHandler",s=>{var o,u;const{name:n,value:a}=s.target,{page:t,show:r,search:i}=this.state;if(this.firstPageHandler(),n==="show")return(u=(o=this.props).get)==null||u.call(o,t,a,i),this.setState({show:a});if(n==="search")return v&&clearTimeout(v),v=setTimeout(()=>{var p,x;(x=(p=this.props).get)==null||x.call(p,t,r,a),clearTimeout(v)},1e3),this.setState({search:a})});m(this,"previousPageHandler",()=>{const{page:s}=this.state;s<=1||this.pageChangeHandler(s-1)});m(this,"nextPageHandler",()=>{const{page:s,pageNumber:n}=this.state;s>=n||this.pageChangeHandler(s+1)});m(this,"firstPageHandler",()=>{const{page:s}=this.state;s<=1||this.pageChangeHandler(1)});m(this,"lastPageHandler",()=>{const{page:s,pageNumber:n}=this.state,a=n;s>=a||this.pageChangeHandler(a)});m(this,"pageChangeHandler",s=>{const{show:n,search:a,pageNumber:t}=this.state,r=t;let i;s<3?i=1:s===r?i=r-2:i=s-1;const o=i+1,u=i+2;this.setState({page:s,pageFirst:i,pageSecond:o,pageLast:u},()=>{var p,x;return(x=(p=this.props).get)==null?void 0:x.call(p,s,n,a)})});m(this,"onClick",s=>{s.preventDefault();const n=s.target.href;this.exportData(n)});m(this,"exportData",async s=>{const{data:n,title:a}=this.props,t=s.split("/")[s.split("/").length-1],r=a+"."+t,i=localStorage.getItem("token");try{const o=new FormData;o.append("data",n),o.append("name",r);const p=await(await fetch(s,{method:"POST",mode:"cors",body:o,headers:{Authorization:i}})).blob(),x=URL.createObjectURL(p),j=document.createElement("a");j.style.display="none",j.href=x,j.download=r,document.body.appendChild(j),j.click(),window.URL.revokeObjectURL(x)}catch(o){console.log(o)}})}componentDidUpdate(s,n){const{total:a}=this.props,{show:t}=this.state;a!==void 0&&(s.total!==a||n.show!==t&&typeof t=="number")&&this.setState({pageNumber:Math.ceil(a/t)})}render(){if(!this.props.content)return null;const{fields:s,array:n,loading:a=!1,total:t=0,limit:r,bordered:i,xs:o=12,sm:u=12,md:p=12,lg:x=12,xl:j=12,icon:D,title:$,subtitle:O,add:L,link:U,className:W="",dark:l=!1,borderless:I,innerClassName:B="",outerClassName:q="",containerClassName:z="",addon:S,p0:G,select:E,children:J,selectHandler:K,style:Q,content:{cms:{pages:{components:{list:{all:V,first:X,last:Y,loading:Z,print:ee,pdf:se,csv:te,excel:ae,search:ne,show:le,sl:re,showing:ie,from:oe,entries:{singular:ce,plural:de}}}}}}}=this.props,{show:f,search:he,page:g,pageFirst:k,pageSecond:C,pageLast:w,pageNumber:y}=this.state,H=s.map(({name:N,fixed:b})=>e.jsx("th",{className:"align-middle text-nowrap bg-"+(l?"darkblue":"soft"),style:b?{position:"sticky",right:0}:{},children:N},N));H.unshift(e.jsx("th",{className:"text-center align-middle",children:re},"#")),E&&H.unshift(e.jsx("th",{className:"align-middle text-center",children:e.jsx("input",{type:"checkbox",onClick:K,className:"select_all"})},"select_all"));const xe=n.map((N,b)=>{if(r&&b>=r)return null;let F=[e.jsx("th",{className:"text-center align-middle",children:(f==="All"?0:(g-1)*f)+b+1},"primary"+b)];return E&&F.unshift(e.jsx("th",{className:"text-center align-middle",children:e.jsx("input",{type:"checkbox",value:N._id})},"secondary"+b)),s.forEach(({key:A,minWidth:pe,fixed:ge})=>{F.push(e.jsx("td",{className:"align-middle text-truncate",style:be({minWidth:pe,maxWidth:250,borderColor:l?"#606060":"#DEE2E6"},ge?{position:"sticky",right:0,backgroundColor:l?"#1B223F":"#F4F4F4"}:{}),children:N[A]},A))}),e.jsx("tr",{className:"align-middle",children:F},b+1)}),T=t%f,me=t===0?t:T!==0?T:f;return e.jsxs(R,{xs:o,sm:u,md:p,lg:x,xl:j,className:q,children:[e.jsx("input",{type:"hidden",id:"table-show",value:f}),e.jsx("input",{type:"hidden",id:"table-page",value:g}),e.jsx("input",{type:"hidden",id:"table-search",value:he}),e.jsxs("div",{className:`rounded-4 d-flex align-items-center mb-4 mb-sm-5 py-3 py-sm-4 px-4 px-sm-5 bg-${l?"border":"border-10"}`,children:[e.jsxs("div",{className:"d-flex align-items-center",children:[D&&e.jsx("i",{className:"fas fa-"+D+" mr-3 mr-sm-4 text-30 text-border fa-fw"}),e.jsxs("div",{children:[e.jsx("div",{className:`text-${l?"light":"black"} text-700 text-20 mb-1`,children:$}),e.jsx("div",{className:"text-secondary text-10",children:O})]})]}),L&&e.jsx(Ne,{className:"ml-auto",to:U,children:e.jsxs(P,{color:"border",className:"rounded-2 py-2 text-16 text-500 px-3 px-sm-4",children:[e.jsx(c,{icon:ye,fixedWidth:!0,className:"mr-2 mr-sm-3"}),L]})})]}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:`${!S&&"col-lg-9"} ${z}`,children:e.jsxs("div",{className:`d-flex flex-column h-100 ${l?"bg-border text-light ":" "}${W}`,style:Q,children:[e.jsx("div",{className:"px-4 pt-4 text-700 position-relative",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"text-18 text-400",children:$}),e.jsxs("div",{className:"ml-auto d-none d-md-flex align-items-center",children:[e.jsxs("div",{className:`d-flex align-items-center text-${l?"light":"secondary"} rounded-4`,children:[e.jsx("div",{className:"border-right border-border-50",children:e.jsx("div",{className:`px-3 py-2 text-300 h-100 rounded-left-4 bg-${l?"darkblue":"soft"}`,children:le})}),e.jsxs(_,{type:"select",name:"show",onChange:this.inputChangedHandler,className:`px-3 py-2 text-center rounded-left-0 rounded-right-4 h-100 d-block text-reset border-bottom-0 border-${l?"darkblue":"soft"} bg-${l?"darkblue":"soft"}`,style:{width:"5rem"},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"All",children:V})]})]}),e.jsxs(ve,{className:"mx-3",children:[e.jsxs(ke,{color:"green",caret:!0,children:[e.jsx(c,{icon:Ce,className:"mr-2"}),e.jsx("span",{children:"Export"})]}),e.jsxs(we,{children:[e.jsxs("a",{href:"/api/export/xlsx",onClick:this.onClick,className:"export dropdown-item text-decoration-none text-reset",children:[e.jsx(c,{icon:He,className:`text-${l?"white":"darkblue"} mr-2`}),ae]}),e.jsxs("a",{href:"/api/export/pdf",onClick:this.onClick,className:"export dropdown-item text-decoration-none text-reset",children:[e.jsx(c,{icon:Fe,className:"text-danger mr-2"}),se]}),e.jsxs("a",{href:"/api/export/csv",onClick:this.onClick,className:"export dropdown-item text-decoration-none text-reset",children:[e.jsx(c,{icon:Pe,className:"text-green mr-2"}),te]}),e.jsxs("a",{href:"/api/export/pdf",onClick:this.onClick,className:"export dropdown-item text-decoration-none text-reset",children:[e.jsx(c,{icon:De,className:"text-primary mr-2"}),ee]})]})]}),e.jsx(_,{type:"search",name:"search",onChange:this.inputChangedHandler,className:`bg-${l?"darkblue":"blue-10 text-secondary"} border-0 rounded-4`,style:{maxWidth:150},placeholder:`${ne}...`})]})]})}),e.jsxs("div",{className:`flex-fill d-flex flex-column ${G?"p-0":"p-4"}`,children:[e.jsxs("div",{className:"table-responsive flex-fill scrollbar-blue mb-3",children:[e.jsxs(Oe,{dark:l,bordered:i,hover:!0,borderless:I,className:`bg-${l?"darkblue":""} ${B}`,children:[e.jsx("thead",{className:l?"text-light":"bg-soft text-secondary",children:e.jsx("tr",{children:H})}),e.jsx("tbody",{className:"text-300 "+(l?"bg-darklight-50 text-light":"bg-soft-50 text-secondary"),children:!a&&xe})]}),a&&e.jsx(R,{xs:12,className:"text-center",children:e.jsxs("div",{className:"text-center py-3",children:[Z,"..."]})})]}),e.jsx("div",{children:J}),e.jsxs("div",{children:[e.jsxs("div",{children:[ie," ",+g!==y&&+g>1?f:me," ",oe," ",t," ",t>1?de:ce,"."]}),e.jsx("div",{className:"pt-2 d-flex justify-content-end",children:f!=="All"&&e.jsxs("ul",{className:"pagination btn-group",children:[g!==1&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"btn btn-yellow",onClick:this.firstPageHandler,children:[e.jsx(c,{icon:$e,className:"mr-2"}),X]}),e.jsx("li",{className:"btn btn-darkblue text-secondary",onClick:this.previousPageHandler,children:e.jsx(c,{icon:Le})})]}),e.jsx("li",{className:"btn btn-darkblue "+(g===k?"text-700 active":"secondary"),onClick:()=>this.pageChangeHandler(k),children:k}),y>1&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"btn btn-darkblue "+(g===C?"text-700 active":"secondary"),onClick:()=>this.pageChangeHandler(C),children:C}),y>2&&e.jsx("li",{className:"btn btn-darkblue "+(g===w?"text-700 active":"secondary"),onClick:()=>this.pageChangeHandler(w),children:w}),g!==y&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"btn btn-darkblue text-secondary",onClick:this.nextPageHandler,children:e.jsx(c,{icon:Se})}),e.jsxs("li",{className:"btn btn-primary",onClick:this.lastPageHandler,children:[Y,e.jsx(c,{icon:Ee,className:"ml-2"})]})]})]})]})})]})]})]})}),S]})]})}}const We=d=>({...d}),ze=fe(We)(Ue),Ge=({deleteAction:d,className:h="",children:s})=>{const[n,a]=M.useState(!1),t=()=>a(!n),r=()=>{t(),d()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{cursor:"pointer"},onClick:t,children:s}),e.jsxs(Te,{isOpen:n,toggle:t,centered:!0,className:h,children:[e.jsx(Ae,{toggle:t,children:"Delete item"}),e.jsxs(Re,{className:"text-center",children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsxs("div",{children:[e.jsxs(P,{color:"danger",onClick:r,children:["Delete ",e.jsx(c,{icon:_e,fixedWidth:!0})]})," ",e.jsxs(P,{color:"secondary",onClick:t,children:["Close ",e.jsx(c,{icon:Me,fixedWidth:!0})]})]})]})]})]})};export{Ge as D,ze as L};
