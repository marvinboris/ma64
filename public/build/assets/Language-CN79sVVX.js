var k=Object.defineProperty;var y=(t,a,s)=>a in t?k(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var d=(t,a,s)=>y(t,typeof a!="symbol"?a+"":a,s);import{c as N,r as w,j as e,R as j,C as f,o as T,p as H,a as L,s as _}from"./index-BncDn27B.js";import{B,S as D,a as E}from"./Subtitle-EIBA-Hk5.js";import{e as R}from"./Error-CC8F97pB.js";import{a as I,F as P}from"./Input-BldVOD2V.js";import{b as q}from"./BetweenButton-CNQ28UJ2.js";import{T as M}from"./index-C0jNRMwo.js";import{F as O}from"./Feedback-C0SvNv4r.js";import{g as W}from"./languages-CMnUc65G.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const S="cog";class $ extends w.Component{constructor(){super(...arguments);d(this,"state",{id:"",abbr:""});d(this,"submitHandler",async s=>{var n,r;s.preventDefault(),await((r=(n=this.props).post)==null?void 0:r.call(n,this.state.id))});d(this,"inputChangeHandler",s=>{var c,m,p;const{name:n,value:r,files:i}=s.target;if(n==="abbr"){const o=(p=(m=(c=this.props.backend)==null?void 0:c.languages)==null?void 0:m.languages)==null?void 0:p.find(u=>u.abbr===r);return this.setState({id:o==null?void 0:o.id,abbr:r})}this.setState({[n]:i?i[0]:r})})}async componentDidMount(){var s,n;(n=(s=this.props).get)==null||n.call(s),this.setState({abbr:localStorage.getItem("lang")})}render(){var b,x;if(!((b=this.props.content)!=null&&b.cms)||!((x=this.props.backend)!=null&&x.languages))return null;let{content:{cms:{pages:{components:{form:{save:s}},backend:{pages:{settings:{title:n,language:{title:r,form:i}}}}}}},backend:{languages:{loading:c,error:m,message:p,languages:o}}}=this.props,{id:u,abbr:v}=this.state,g=null,h=null;o||(o=[]);const C=o.sort((l,F)=>l.name.localeCompare(F.name)).map(l=>e.jsx("option",{value:l.abbr,children:l.name},l.name));return c?g=e.jsx(f,{xs:12,children:e.jsx(L,{})}):(h=e.jsx(e.Fragment,{children:e.jsx(R,{err:m})}),g=e.jsx(e.Fragment,{children:e.jsx(j,{children:e.jsx(I,{link:"",onSubmit:this.submitHandler,icon:S,title:r,innerClassName:"row justify-content-center",className:"shadow-sm",children:e.jsxs(f,{lg:8,children:[e.jsx(O,{message:p}),e.jsxs(j,{className:"justify-content-center",children:[e.jsx("input",{type:"hidden",name:"id",value:u}),e.jsxs(P,{type:"select",className:"col-md-6",icon:T,onChange:this.inputChangeHandler,value:v,name:"abbr",required:!0,placeholder:i.select_language,children:[e.jsx("option",{value:"",children:i.select_language}),C]}),e.jsx("div",{className:"col-12 text-center",children:e.jsx(q,{color:"green",icon:H,children:s})})]})]})})})})),e.jsxs(e.Fragment,{children:[e.jsxs(M,{children:[e.jsx(B,{main:r,icon:S}),e.jsx(D,{user:!0,children:n}),e.jsx(E,{user:!0,children:r})]}),e.jsxs("div",{className:"p-4 pb-0",children:[h,g]})]})}}const z=t=>({...t}),A=t=>({get:()=>t(W()),post:a=>t(_(a))}),ne=N(z,A)($);export{ne as default};
