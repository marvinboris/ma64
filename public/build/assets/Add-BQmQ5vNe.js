var D=Object.defineProperty;var _=(i,t,s)=>t in i?D(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var p=(i,t,s)=>_(i,typeof t!="symbol"?t+"":t,s);import{c as B,r as R,j as e,N as $,C as H,R as j,a as E}from"./index-BncDn27B.js";import{B as O,S as P,a as U}from"./Subtitle-EIBA-Hk5.js";import{e as W}from"./Error-CC8F97pB.js";import{F as b,a as I}from"./Input-BldVOD2V.js";import{S as J}from"./index-3VnVM_zO.js";import{T as M}from"./index-C0jNRMwo.js";import{F as V}from"./Feedback-C0SvNv4r.js";import{a as z,p as G,b as K,r as Q}from"./languages-CMnUc65G.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const u="language",w={name:"",abbr:"",flag:"",add:!1};class X extends R.Component{constructor(){super(...arguments);p(this,"state",{...w});p(this,"saveHandler",s=>{var a,r,n,o,l;s.preventDefault(),this.props.edit?(n=(r=this.props).patch)==null||n.call(r,(a=this.props.match)==null?void 0:a.params.id,s.target):(l=(o=this.props).post)==null||l.call(o,s.target)});p(this,"saveAddHandler",()=>this.setState({add:!0},()=>{var s,a;return(a=(s=this.props).post)==null?void 0:a.call(s,document.querySelector("form"))}));p(this,"inputChangeHandler",s=>{const{name:a,value:r,files:n}=s.target;this.setState({[a]:n?n[0]:r})})}componentDidMount(){var s,a,r,n;(a=(s=this.props).reset)==null||a.call(s),this.props.edit&&this.props.match&&((n=(r=this.props).show)==null||n.call(r,this.props.match.params.id))}componentDidUpdate(s){var a,r,n,o,l,d,c,h,m;if(!((r=(a=s.backend)==null?void 0:a.languages)!=null&&r.message)&&((o=(n=this.props.backend)==null?void 0:n.languages)!=null&&o.message)&&this.props.backend.languages.message.type==="success"&&!this.props.edit&&(this.state.add?this.setState({...w}):(l=this.props.history)==null||l.push({pathname:"/user/languages",state:{message:this.props.backend.languages.message}})),!((c=(d=s.backend)==null?void 0:d.languages)!=null&&c.language)&&((m=(h=this.props.backend)==null?void 0:h.languages)!=null&&m.language)){const{backend:{languages:{language:x}}}=this.props;this.setState({...x})}}componentWillUnmount(){var s,a;(a=(s=this.props).reset)==null||a.call(s)}render(){var C,N,k;if(!((C=this.props.content)!=null&&C.cms)||!((N=this.props.backend)!=null&&N.languages)||!((k=this.props.auth)!=null&&k.data))return null;let{content:{cms:{pages:{backend:{pages:{languages:{title:s,add:a,edit:r,index:n,form:o}}}}},countries:l},backend:{languages:{loading:d,error:c,message:h}},auth:{data:{role:{features:m}}}}=this.props,{name:x,abbr:F,flag:v}=this.state,f=null,S=null;const y=m.find(g=>g.prefix==="languages"),A=!(y&&JSON.parse(y.permissions).includes(this.props.edit?"u":"c"))&&e.jsx($,{to:"/user/dashboard"}),T=l.map(({country:g,code:q,name:L})=>e.jsx("option",{value:g,"data-code":q,children:L},g));return d?f=e.jsx(H,{xs:12,children:e.jsx(E,{})}):(S=e.jsx(e.Fragment,{children:e.jsx(W,{err:c})}),f=e.jsx(e.Fragment,{children:e.jsxs(H,{xl:9,children:[e.jsx(V,{message:h}),this.props.edit&&e.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),e.jsx("div",{className:"shadow-lg rounded-8 bg-white px-4 px-sm-5 py-3 py-sm-4",children:e.jsxs(j,{className:"my-2 my-sm-3",children:[e.jsx("div",{className:"col-lg-9",children:e.jsxs(j,{children:[e.jsx(b,{type:"text",className:"col-md-6",icon:u,onChange:this.inputChangeHandler,value:x,name:"name",required:!0,placeholder:o.name}),e.jsx(b,{type:"text",className:"col-md-6",icon:u,onChange:this.inputChangeHandler,value:F,name:"abbr",required:!0,placeholder:o.abbr}),e.jsxs(b,{className:"col-md-6",type:"select",addon:e.jsx("span",{className:"text-secondary text-small d-inline-flex",children:e.jsx("div",{className:"rounded-circle overflow-hidden position-relative d-flex justify-content-center align-items-center",style:{width:30,height:30},children:e.jsx("span",{className:`flag-icon text-xx-large position-absolute flag-icon-${v.toLowerCase()}`})})}),onChange:this.inputChangeHandler,value:v,validation:{required:!0},name:"flag",required:!0,placeholder:o.select_flag,children:[e.jsx("option",{value:"",children:o.select_flag}),T]})]})}),e.jsx(J,{edit:!!this.props.edit,saveAddHandler:this.saveAddHandler})]})})]})})),e.jsxs(e.Fragment,{children:[e.jsxs(M,{children:[e.jsx(O,{items:this.props.edit?[{to:"/user/languages",content:n}]:void 0,main:this.props.edit?r:a,icon:u}),e.jsx(P,{children:s}),e.jsx(U,{children:this.props.edit?r:a})]}),e.jsxs("div",{children:[A,S,e.jsx(j,{children:e.jsx(I,{onSubmit:this.saveHandler,icon:u,title:this.props.edit?r:a,list:n,link:"/user/languages",innerClassName:"row justify-content-center",children:f})})]})]})}}const Y=i=>({...i}),Z=i=>({show:t=>i(z(t)),post:t=>i(G(t)),patch:(t,s)=>i(K(t,s)),reset:()=>i(Q())}),me=B(Y,Z)(X);export{me as default};
