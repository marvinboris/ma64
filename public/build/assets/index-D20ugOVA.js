import{c as v,r as E,j as e,u as L,m as O,L as u,F as m,i as w,k as J,n as R,R as _,N as $}from"./index-BncDn27B.js";import{B as A,S as B,a as I}from"./Subtitle-EIBA-Hk5.js";import{D as P,L as C}from"./Delete-DN_4O9m9.js";import{e as M}from"./Error-CC8F97pB.js";import{F as h}from"./Feedback-C0SvNv4r.js";import{T as U}from"./index-C0jNRMwo.js";import{g as q,d as z,r as G}from"./features-BGWhQVVm.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./Table-Cy8UlfKH.js";const f="tools";class H extends E.Component{componentDidMount(){var s,o;(o=(s=this.props).get)==null||o.call(s)}componentWillUnmount(){this.props.reset()}render(){var l,p,x;if(!((l=this.props.content)!=null&&l.cms)||!((p=this.props.backend)!=null&&p.features)||!((x=this.props.auth)!=null&&x.data))return null;let{content:{cms:{pages:{components:{list:{action:s}},backend:{pages:{features:{title:o,add:i,index:c,form:d}}}}}},backend:{features:{loading:j,error:g,message:k,features:n,total:N}},auth:{data:{role:{features:b}}}}=this.props;const t=b.find(a=>a.prefix==="features"),F=!t&&e.jsx($,{to:"/user/dashboard"}),y=e.jsx(e.Fragment,{children:e.jsx(M,{err:g})}),S=this.props.location.state?e.jsx(h,{time:5e3,message:this.props.location.state.message}):null,T=e.jsx(h,{message:k});n||(n=[]);const D=n.map(a=>L(a,{created_at:O(a.created_at),action:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{to:`/user/features/${a.id}`,className:"mx-1",children:e.jsx(m,{icon:w,className:"text-green",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("u")&&e.jsx(u,{to:`/user/features/${a.id}/edit`,className:"mx-1",children:e.jsx(m,{icon:J,className:"text-brokenblue",fixedWidth:!0})}),JSON.parse((t==null?void 0:t.permissions)||"[]").includes("d")&&e.jsx("span",{className:"mx-1",children:e.jsx(P,{deleteAction:()=>this.props.delete(a.id),children:e.jsx(m,{icon:R,className:"text-red",fixedWidth:!0})})})]})})),W=e.jsx(e.Fragment,{children:e.jsx(_,{children:e.jsx(C,{array:D,loading:j,data:JSON.stringify(n),get:this.props.get,total:N,bordered:!0,add:i,link:"/user/features/add",icon:f,title:c,className:"shadow-sm",fields:[{name:d.name,key:"name"},{name:d.prefix,key:"prefix"},{name:d.created_at,key:"created_at"},{name:s,key:"action",fixed:!0}]})})});return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(A,{main:c,icon:f}),e.jsx(B,{children:o}),e.jsx(I,{children:c})]}),e.jsxs("div",{children:[F,y,S,T,W]})]})}}const K=r=>({...r}),Q=r=>({get:(s,o,i)=>r(q(s,o,i)),delete:s=>r(z(s)),reset:()=>r(G())}),ne=v(K,Q)(H);export{ne as default};
