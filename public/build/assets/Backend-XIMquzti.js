var cs=Object.defineProperty;var os=(c,r,t)=>r in c?cs(c,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[r]=t;var f=(c,r,t)=>os(c,typeof r!="symbol"?r+"":r,t);import{c as is,r as y,u as ds,j as s,b1 as P,R as m,a$ as V,C as i,b2 as _,p as ls,a as ms}from"./index-BncDn27B.js";import{N as A,T as x,a as E}from"./TabPane-Dffaj7Z7.js";import{B as hs,S as xs,a as bs}from"./Subtitle-EIBA-Hk5.js";import{e as ps}from"./Error-CC8F97pB.js";import{a as js}from"./Input-BldVOD2V.js";import{b as us}from"./BetweenButton-CNQ28UJ2.js";import{F as gs}from"./Feedback-C0SvNv4r.js";import{g as fs,p as Ns,r as $s}from"./cms-Dgxu_C9N.js";import{B as h}from"./Backend-mU-JZRnG.js";import{r as p}from"./types-DL2rpS-Q.js";import"./app-BShz7gyO.js";import"./BreadcrumbItem-BLbML1-v.js";import"./FormGroup-CjRq5iBt.js";import"./WithTooltip-yJJWpatI.js";const j=({sm:c=!1})=>s.jsx(i,{xs:12,className:`mb-${c?2:3}`}),ks=({backend:c,language:r})=>{const[t,a]=y.useState(r.abbr+"-header"),[e,n]=y.useState(c),N=o=>{t!==o&&a(o)},F=Object.keys(c||{}).map(o=>{const C=`${r.abbr}-${o}`;return s.jsx(P,{children:s.jsx(A,{onClick:()=>N(C),className:t===C?"active":"",children:s.jsx("span",{className:"text-capitalize",children:o})})},C)}),d=`${r.abbr}[backend]`,u=h.header,g=`${d}[header]`,$=e==null?void 0:e.header,T=["header"],D=p(e,n)(u,g,$,T,[],[{regex:`${g}[no_notification]`,action:()=>s.jsx(j,{})},{regex:`${g}[sure_logout]`,action:()=>s.jsx(j,{})}]),S=h.footer,v=`${d}[footer]`,l=e==null?void 0:e.footer,b=["footer"],B=p(e,n)(S,v,l,b),H=h.sidebar,k=`${d}[sidebar]`,R=e==null?void 0:e.sidebar,O=["sidebar"],U=p(e,n)(H,k,R,O,[{regex:`${k}[admin]`,action:()=>s.jsx(i,{xs:12,children:s.jsx("h4",{children:"Roles"})})},{regex:`${k}[menu][dashboard]`,action:()=>s.jsx(i,{xs:12,children:s.jsx("h4",{children:"Menu"})})},{regex:`${k}[menu][.+][title]`,action:o=>s.jsx(i,{xs:12,children:s.jsx("h5",{children:o})})}],[{regex:`${k}[user]`,action:()=>s.jsx(j,{})}]),L=h.pages.dashboard,I=`${d}[pages][dashboard]`,W=e==null?void 0:e.dashboard,z=["pages","dashboard"],K=p(e,n)(L,I,W,z,[{regex:`${I}[admin][title]`,action:()=>s.jsx(i,{xs:12,children:s.jsx("h4",{children:"Admin"})})},{regex:`${I}[.+][blocks][subscription][title]`,action:()=>s.jsx(i,{xs:12,children:s.jsx("h5",{children:"Blocks"})})},{regex:`${I}[user][title]`,action:()=>s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsx(i,{xs:12,children:s.jsx("h4",{children:"User"})})]})}],[{regex:`${I}[.+][subtitle]`,action:()=>s.jsx(j,{sm:!0})}]),q=Object.keys(h.pages).map(o=>{const C=h.pages[o],M=`${d}[pages][${o}]`,rs=e==null?void 0:e[o],as=["pages",o],ns=p(e,n)(C,M,rs,as,[],[{regex:`${M}[index]`,action:()=>s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsx(i,{xs:12,children:s.jsx("h4",{children:"Form"})})]})}]);return s.jsx(x,{tabId:`${r.abbr}-${o}`,className:"pt-4",children:s.jsx(m,{children:ns})},Math.random())}),G=h.pages.cms,w=`${d}[pages][cms]`,J=e==null?void 0:e.cms,Q=["pages","cms"],X=p(e,n)(G,w,J,Q,[],[{regex:`${w}[auth]`,action:()=>s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsx(i,{xs:12,children:s.jsx("h4",{children:"Form"})})]})}]),Y=h.pages.settings,Z=`${d}[pages][settings]`,ss=e==null?void 0:e.settings,es=["pages","settings"],ts=p(e,n)(Y,Z,ss,es);return s.jsxs(s.Fragment,{children:[s.jsx(_,{tabs:!0,pills:!0,children:F}),s.jsxs(E,{activeTab:t,children:[s.jsx(x,{tabId:r.abbr+"-header",className:"pt-4",children:s.jsx(m,{children:D})}),s.jsx(x,{tabId:r.abbr+"-footer",className:"pt-4",children:s.jsx(m,{children:B})}),s.jsx(x,{tabId:r.abbr+"-sidebar",className:"pt-4",children:s.jsx(m,{children:U})}),s.jsx(x,{tabId:r.abbr+"-dashboard",className:"pt-4",children:s.jsx(m,{children:K})}),q,s.jsx(x,{tabId:r.abbr+"-cms",className:"pt-4",children:s.jsx(m,{children:X})}),s.jsx(x,{tabId:r.abbr+"-settings",className:"pt-4",children:s.jsx(m,{children:ts})})]})]})};class Is extends y.Component{constructor(){super(...arguments);f(this,"state",{activeTab:"fr"});f(this,"submitHandler",async t=>{var a,e;t.preventDefault(),await((e=(a=this.props).patch)==null?void 0:e.call(a,t.target))});f(this,"inputChangeHandler",t=>{const{name:a,value:e,files:n}=t.target;this.setState({[a]:n?n[0]:e})});f(this,"fileUpload",()=>{var t;return(t=document.getElementById("logo"))==null?void 0:t.click()});f(this,"toggle",t=>{this.state.activeTab!==t&&this.setState({activeTab:t})})}static getDerivedStateFromProps(t,a){var e,n;if((n=(e=t.backend)==null?void 0:e.cms)!=null&&n.cms&&a.app_name===""){const{backend:{cms:{cms:{backend:N}}}}=t;return ds(a,{...N})}return a}async componentDidMount(){var t,a,e,n;(a=(t=this.props).reset)==null||a.call(t),(n=(e=this.props).get)==null||n.call(e)}componentWillUnmount(){var t,a;(a=(t=this.props).reset)==null||a.call(t)}render(){var D;if(!this.props.content||!((D=this.props.backend)!=null&&D.cms))return null;let{content:{cms:{pages:{components:{form:{save:t}},backend:{pages:{cms:{title:a,backend:e}}}}}},backend:{cms:{loading:n,error:N,message:F,cms:d,languages:u}}}=this.props;const{activeTab:g}=this.state;let $=null,T=null;if(n)$=s.jsx(i,{xs:12,children:s.jsx(ms,{})});else{T=s.jsx(s.Fragment,{children:s.jsx(ps,{err:N})}),u||(u=[]);const S=u.map(l=>s.jsx(P,{children:s.jsx(A,{className:g===l.abbr?"active":void 0,onClick:()=>this.toggle(l.abbr),children:l.name})},Math.random())),v=u.map(l=>{const b=d==null?void 0:d.pages[l.abbr].backend;if(!b)return null;const B={header:b.header,footer:b.footer,sidebar:b.sidebar,...b.pages};return s.jsx(x,{tabId:l.abbr,children:s.jsx(ks,{backend:B,language:l})},Math.random())});$=s.jsx(s.Fragment,{children:s.jsx(m,{children:s.jsx(js,{onSubmit:this.submitHandler,icon:V,title:e,link:"/admin/cms",innerClassName:"row",className:"shadow-sm",children:s.jsxs(i,{lg:12,children:[s.jsx(gs,{message:F}),s.jsxs(m,{children:[s.jsx("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),s.jsx(i,{lg:2,children:s.jsx(_,{tabs:!0,vertical:!0,pills:!0,children:S})}),s.jsx(i,{lg:10,children:s.jsx(E,{activeTab:g,children:v})}),s.jsx("div",{className:"col-12",children:s.jsx(us,{color:"green",icon:ls,children:t})})]})]})})})})}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-soft py-4 pl-5 pr-4 position-relative",children:[s.jsx(hs,{main:e,icon:V}),s.jsx(xs,{user:!0,icon:V,children:a}),s.jsx(bs,{user:!0,children:e})]}),s.jsxs("div",{className:"p-4 pb-0",children:[T,$]})]})}}const Cs=c=>({...c}),Ts=c=>({get:()=>c(fs()),patch:r=>c(Ns("backend",r)),reset:()=>c($s())}),Os=is(Cs,Ts)(Is);export{Os as default};
